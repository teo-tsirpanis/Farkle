<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <CompileDependsOn>CallFarkle;$(CompileDependsOn)</CompileDependsOn>
  </PropertyGroup>

  <ItemDefinitionGroup Condition="'$(Language)' == 'C#'">
    <Farkle>
      <CompileIt>true</CompileIt>
      <OutputExtension>.g.cs</OutputExtension>
    </Farkle>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Language)' == 'F#'">
    <Farkle>
      <CompileIt>true</CompileIt>
      <OutputExtension>.g.fs</OutputExtension>
    </Farkle>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Language)' != 'C#' AND '$(Language)' != 'F#'">
    <Farkle>
      <OutputExtension>.out.txt</OutputExtension>
    </Farkle>
  </ItemDefinitionGroup>

  <Choose>
    <When Condition="'$(MSBuildRuntimeType)' == 'Core'">
      <PropertyGroup>
        <FarkleTargetAssembly>../tools/netcoreapp2.1/Farkle.Tools.MSBuild.dll</FarkleTargetAssembly>
      </PropertyGroup>
    </When>
    <Otherwise>
      <PropertyGroup>
        <FarkleTargetAssembly>../tools/net45/Farkle.Tools.MSbuild.dll</FarkleTargetAssembly>
      </PropertyGroup>
    </Otherwise>
  </Choose>
</Project>