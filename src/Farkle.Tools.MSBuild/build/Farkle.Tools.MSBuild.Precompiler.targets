<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <FarkleSuppressGrammarErrors Condition="'$(FarkleSuppressGrammarErrors)' == ''">false</FarkleSuppressGrammarErrors>
  </PropertyGroup>

  <UsingTask
      Condition="$(FarkleEnablePrecompiler) != false"
      TaskName="Farkle.Tools.MSBuild.FarklePrecompileTask"
      AssemblyFile="$(FarkleTaskAssembly)"/>

  <Target
      Name="FarklePrecompileGrammars"
      Condition="$(FarkleEnablePrecompiler) != false"
      DependsOnTargets="CheckForMSBuild16">
    <FarklePrecompileTask
        AssemblyPath="@(IntermediateAssembly->'%(FullPath)')"
        WeaverName="Farkle.Tools.Precompiler"
        Configuration="@(SigourneyConfiguration)"
        GenerateDocumentation="$(FarkleGenerateDocumentation)"
        DocumentationOutputPath="$(OutputPath)">
      <Output TaskParameter="GeneratedDocumentationFiles" ItemName="FileWrites"/>
    </FarklePrecompileTask>
  </Target>
</Project>
